# -------------------------------------------------------------------------------------------------
# Required environment variables.

# ACTION. This defines the intended action to perform. The supported values are: Create, Destroy
# PROJECT_ID. This is the project id to be used for creating resources. Ex: supercomputer-testing
# NAME_PREFIX. This is the name prefix to be used for naming the resources. Ex: spani
# REGION. This is the region for creating the resources. Ex: us-central1
# ZONE. This is the Zone for creating the resources. Ex: us-central1-f

# Optional Environment variables.

# INSTANCE_COUNT. This defines the VM instance count. The default value is 1 if not set.
# GPU_COUNT. This defines the GPU count per VM. The default value is 2 if not set.
# VM_TYPE. This defines the VM type. The default value is a2-highgpu-2g if not set.
# ACCELERATOR_TYPE. This defines the Accelerator type. The default value is nvidia-tesla-a100 if not set.
# IMAGE_FAMILY_NAME. This defines the image family name for the VM. The default value is pytorch-1-12-gpu-debian-10 if not set. We support images only from ml-images project.
# IMAGE_NAME. This defines the image name for the VM. The default value is c2-deeplearning-pytorch-1-12-cu113-v20221107-debian-10 if not set. We support images only from ml-images project.
# GCS_PATH. Google cloud storage bucket path to use for state management and copying scripts. Ex: gs://spani-tst
# DISK_SIZE_GB. This defines the disk size in GB for the VMs. The default value is 2000 GB(2 TB) if not specified.
# DISK_TYPE. This defines the disk type to use for VM creation. The default value is pd-ssd if not defined.
# COPY_DIR_PATH. This defines the path of the directory in the container to copy file to the VM (under /tmp directory). 
#                Local directory can be mounted to the docker container and path can be specified via COPY_DIR_PATH environment variable to copy files.
# METADATA. This defines optional metadata to be set for the VM. Ex: { key1 = "val", key2 = "val2"}
# LABELS. This defines key value pair to set as labels when the VMs are created. Ex: { key1 = "val", key2 = "val2"} 
# STARTUP_SCRIPT. This defines the startup script to run when the VM starts up. Ex: python /usr/cp/train.py
# STARTUP_SCRIPT_PATH. This defines the path of the startup script in the container. The script gets executed when the VM starts.
#                      Local directory can be mounted into the container and the startup script path can be provided accordingly. Ex: /usr/cp/test.sh
# SETUP_RAY. This controls if ray is setup on the VMs or not. If set to yes ray head node is setup on instance-0 and ray worker node is setup on other nodes. The supported values are: yes, no.
# SHOW_PROXY_URL. This controls if Jupyter notebook proxy url is retrieved for the cluster or not. If this is present and set to no, then connection information is not collected.
#                 The supported values are: yes, no.
# -------------------------------------------------------------------------------------------------

ACTION=Create
PROJECT_ID=supercomputer-testing
NAME_PREFIX=spani
REGION=us-central1
ZONE=us-central1-f
GCS_PATH=gs://spani-tst
COPY_DIR_PATH=/usr/cp
STARTUP_SCRIPT=python /tmp/test.py
METADATA={ meta1 = "val", meta2 = "val2" }
LABELS={ label1 = "marker1" }
SETUP_RAY=yes
INSTANCE_COUNT=3